{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function getImage(userValue, page = 1) {\n  const BASE_URL = 'https://pixabay.com/api/';\n  const params = new URLSearchParams({\n    key: '48836479-4489c2f77adf14865904c6664',\n    q: userValue,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: page,\n    per_page: 40,\n  });\n  const url = `${BASE_URL}?${params}`;\n\n  try {\n    const response = await axios.get(url);\n    if (response.data.hits.length === 0) {\n      return [];\n    } else {\n      return response.data;\n    }\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    throw error;\n  }\n}\n","export function createMarkup(images) {\n  return images\n    .map(\n      image => `\n      <div class=\"card\">\n        <div class=\"img-cont\">\n            <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n                <img src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n            </a>\n        </div>\n        <div class=\"describtion-cont\">\n            <div class=\"block\">\n                <h4 class=\"title\">Likes</h4>\n                <p class=\"number\">${image.likes}</p>\n            </div>\n            <div class=\"block\">\n                <h4 class=\"title\">Views</h4>\n                <p class=\"number\">${image.views}</p>\n            </div>\n            <div class=\"block\">\n                <h4 class=\"title\">Comments</h4>\n                <p class=\"number\">${image.comments}</p>\n            </div>\n            <div class=\"block\">\n                <h4 class=\"title\">Downloads</h4>\n                <p class=\"number\">${image.downloads}</p>\n            </div>\n        </div>\n        </div>\n    `\n    )\n    .join('');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { getImage } from './js/pixabay-api';\nimport { createMarkup } from './js/render-functions';\n\nconst refs = {\n  form: document.querySelector('.form'),\n  imagesContainer: document.querySelector('.images-container'),\n  input: document.querySelector('.input'),\n  loader: document.querySelector('.loader'),\n  loadBtn: document.querySelector('button[type=\"button\"]'),\n};\n\nconst lightbox = new SimpleLightbox('.gallery-link');\nlet page = 1;\nlet currentQuery = '';\n\nrefs.form.addEventListener('submit', async e => {\n  e.preventDefault();\n\n  const userValue = refs.input.value.trim();\n\n  if (userValue === '') {\n    iziToast.show({\n      backgroundColor: 'red',\n      position: 'topRight',\n      message: 'The input field cannot be empty',\n    });\n    return;\n  }\n\n  page = 1;\n  currentQuery = userValue;\n  refs.loadBtn.classList.add('hidden');\n\n  refs.imagesContainer.innerHTML = '';\n  refs.loader.innerHTML = 'Please wait, the images are loading...';\n\n  try {\n    const data = await getImage(userValue, page);\n    const images = data.hits;\n    if (images.length === 0) {\n      iziToast.show({\n        backgroundColor: 'orange',\n        position: 'topRight',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n      refs.imagesContainer.innerHTML = '';\n      return;\n    }\n    refs.imagesContainer.innerHTML = createMarkup(images);\n    lightbox.refresh();\n\n    if (images.length === 40) {\n      refs.loadBtn.classList.remove('hidden');\n    } else {\n      refs.loadBtn.classList.add('hidden');\n    }\n  } catch (error) {\n    iziToast.show({\n      backgroundColor: 'red',\n      position: 'topRight',\n      message: 'Failed to fetch images. Try again later!',\n    });\n  } finally {\n    setTimeout(() => (refs.loader.innerHTML = ''), 1500);\n  }\n\n  e.target.reset();\n});\n\nrefs.loadBtn.addEventListener('click', async () => {\n  page += 1;\n  refs.loader.innerHTML = 'Loading more images...';\n\n  try {\n    const data = await getImage(currentQuery, page);\n    const images = data.hits;\n\n    if (images.length > 0) {\n      refs.imagesContainer.insertAdjacentHTML(\n        'beforeend',\n        createMarkup(images)\n      );\n      lightbox.refresh();\n    }\n\n    if (images.length === 0 || page * 40 >= data.totalHits) {\n      refs.loadBtn.classList.add('hidden');\n      iziToast.show({\n        backgroundColor: 'orange',\n        position: 'topRight',\n        message:\n          'We are sorry, but you have reached the end of search results.',\n      });\n      return;\n    }\n\n    const cardHeight =\n      document.querySelector('.img-cont')?.getBoundingClientRect().height || 0;\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n  } catch (error) {\n    iziToast.show({\n      backgroundColor: 'red',\n      position: 'topRight',\n      message: 'Failed to fetch images. Try again later!',\n    });\n  } finally {\n    setTimeout(() => (refs.loader.innerHTML = ''), 1500);\n  }\n});\n"],"names":["getImage","userValue","page","BASE_URL","params","url","response","axios","error","createMarkup","images","image","refs","lightbox","SimpleLightbox","currentQuery","e","iziToast","data","cardHeight","_a"],"mappings":"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"}